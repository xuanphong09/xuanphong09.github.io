const translations = {
    vi: {
        title: "MÃ³n QuÃ  Äáº·c Biá»‡t Cho Báº¡n ğŸ",
        description: "Má»™t mÃ³n quÃ  Ä‘áº§y yÃªu thÆ°Æ¡ng Ä‘ang chá» báº¡n khÃ¡m phÃ¡! Nháº¥n Ä‘á»ƒ xem lá»i chÃºc Ä‘áº·c biá»‡t!",
        login: "ÄÄƒng nháº­p báº±ng Google",
        logout: "ÄÄƒng xuáº¥t",
        settings: "CÃ i Äáº·t Trang Web",
        music: "CÃ i Äáº·t Ã‚m Thanh",
        backgroundMusic: "Nháº¡c Ná»n:",
        countdown: "CÃ i Äáº·t Thá»i Gian",
        countdownTime: "Thá»i Gian Äáº¿m NgÆ°á»£c:",
        matrix: "CÃ i Äáº·t Hiá»‡u á»¨ng MÆ°a Chá»¯",
        matrixText: "chá»¯ chÃ­nh mÆ°a chá»¯:",
        matrixColor1: "MÃ u mÆ°a chá»¯ 1:",
        matrixColor2: "MÃ u mÆ°a chá»¯ 2:",
        sequence: "CÃ i Äáº·t chá»¯ chÃ­nh",
        sequenceText: "Ná»™i Dung chá»¯ chÃ­nh:",
        sequenceColor: "MÃ u chá»¯ chÃ­nh:",
        gift: "CÃ i Äáº·t HÃ¬nh Äá»™ng",
        giftImage: "HÃ¬nh Äá»™ng (tÃ¹y chá»n):",
        enableBook: "Hiá»ƒn thá»‹ sÃ¡ch:",
        book: "CÃ i Äáº·t Trang SÃ¡ch",
        enableHeart: "Hiá»ƒn thá»‹ hiá»‡u á»©ng trÃ¡i tim:",
        note: "â³ LÆ°u Ã½: Háº¡n sá»­ dá»¥ng chá»‰ cÃ³ 7 ngÃ y, váº­y nÃªn Ä‘á»«ng táº¡o trÆ°á»›c quÃ¡ sá»›m nhÃ©!",
        follow: "ğŸ¥° HÃ£y follow mÃ¬nh Ä‘á»ƒ cáº­p nháº­t nhá»¯ng website má»›i nháº¥t, nhanh nháº¥t nhÃ©!",
        apply: "Ãp Dá»¥ng CÃ i Äáº·t",
        copyright: 'Website Ä‘Æ°á»£c táº¡o bá»Ÿi tiktoker: <a href="https://www.tiktok.com/@iamtritoan?is_from_webapp=1&sender_device=pc" target="_blank"> @iamtritoan</a>',
        fullscreen: "ToÃ n mÃ n hÃ¬nh",
        // ...thÃªm cÃ¡c key khÃ¡c náº¿u cáº§n...
        pricingTitle: "Báº£ng GiÃ¡ Dá»‹ch Vá»¥",
        voucher: "Voucher giáº£m giÃ¡:",
        tip: "ğŸ’¸ Tip cho tÃ¡c giáº£:",
        total: "Tá»•ng cá»™ng:",
        createWebsite: "ğŸ‰ Táº¡o Website",
        payAndCreate: "ğŸ’³ Thanh toÃ¡n & Táº¡o Website",
        defaultConfig: "ğŸ‰ Sá»­ dá»¥ng cáº¥u hÃ¬nh máº·c Ä‘á»‹nh - MIá»„N PHÃ!",
        customMusic: "Nháº¡c ná»n tÃ¹y chá»‰nh",
        book: "SÃ¡ch ká»· niá»‡m",
        extraPage: "Trang thÃªm",
        heartEffect: "Hiá»‡u á»©ng trÃ¡i tim (trong sÃ¡ch)",
        tipAuthor: "Tip cho tÃ¡c giáº£",
        voucherApplied: "âœ… ÄÃ£ Ã¡p dá»¥ng voucher: {code} (-{discount}%)",
        loadingVoucher: "Äang táº£i voucher...",
        noVoucher: "Báº¡n khÃ´ng cÃ³ voucher nÃ o cáº£!",
        needLoginVoucher: "Báº¡n cáº§n Ä‘Äƒng nháº­p Ä‘á»ƒ xem voucher!",
        cannotLoadVoucher: "KhÃ´ng thá»ƒ táº£i voucher!",
        copyLink: "ğŸ“‹ Copy Link",
        viewWebsite: "ğŸ”— Xem Website",
        close: "âœ– ÄÃ³ng",
        createSuccess: "ğŸ‰ Táº¡o website thÃ nh cÃ´ng!",
        price: "GiÃ¡:",
        shareLink: "Link chia sáº»:",
        copySuccess: "ÄÃ£ copy link sáº£n pháº©m!",
        needLogin: "âŒ Báº¡n cáº§n Ä‘Äƒng nháº­p Ä‘á»ƒ táº¡o website! NÃºt Ä‘Äƒng nháº­p trÃªn gÃ³c trÃ¡i nhÃ©",
        minPay: "âŒ Sá»‘ tiá»n thanh toÃ¡n tá»‘i thiá»ƒu lÃ  10.000 VNÄ!",
        error: "âŒ CÃ³ lá»—i xáº£y ra!",
        invalidPage: "âŒ Cáº¥u trÃºc trang khÃ´ng há»£p lá»‡! Hiá»‡n táº¡i cÃ³ {pages} trang. Vui lÃ²ng thÃªm hoáº·c xÃ³a 1 trang Ä‘á»ƒ táº¡o cáº¥u trÃºc há»£p lá»‡.",
        uploading: "ğŸ“¤ Äang upload áº£nh trang sÃ¡ch...",
        creating: "ğŸŒ Äang táº¡o website...",
        creatingProduct: "ğŸ“¦ Äang táº¡o sáº£n pháº©m...",
        applyingVoucher: "ğŸ« Äang Ã¡p dá»¥ng voucher...",
        applyVoucherSuccess: "âœ… Ãp dá»¥ng voucher thÃ nh cÃ´ng!",
        applyVoucherFail: "âš ï¸ Lá»—i Ã¡p dá»¥ng voucher, tiáº¿p tá»¥c thanh toÃ¡n vá»›i giÃ¡ gá»‘c",
        cannotCreate: "KhÃ´ng thá»ƒ táº¡o website",
        cannotCreateProduct: "Lá»—i khi táº¡o sáº£n pháº©m",
        cannotApplyVoucher: "Ãp dá»¥ng voucher tháº¥t báº¡i!",
        cannotPay: "Lá»—i xá»­ lÃ½ thanh toÃ¡n: ",
        paymentRedirect: "ğŸ”„ Äang chuyá»ƒn Ä‘áº¿n trang thanh toÃ¡n...",
        free: "MIá»„N PHÃ",
        thanks: "Cáº£m Æ¡n báº¡n ráº¥t nhiá»u! Náº¿u thÃ­ch sáº£n pháº©m nÃ y, hÃ£y follow kÃªnh TikTok <b>tá»› lÃ  ToÃ¡n</b> Ä‘á»ƒ mÃ¬nh cÃ³ Ä‘á»™ng lá»±c ra nhiá»u sáº£n pháº©m hÆ¡n nhÃ©!",
        tiktokBtn: "ğŸ¥° xem kÃªnh TikTok",
        heartQr: "â¤ï¸ Táº¡o QR trÃ¡i tim",
        heartQrCopy: "âœ… ÄÃ£ copy link QR trÃ¡i tim!",
        copyShare: "ğŸ“‹ Sao chÃ©p link",
        copied: "âœ… ÄÃ£ sao chÃ©p!",
        copyToClipboard: "ğŸ“‹ ÄÃ£ sao chÃ©p link vÃ o clipboard!",
        copyFail: "âŒ KhÃ´ng thá»ƒ sao chÃ©p link!",

        //
        validCoverOnly: "âœ… Há»£p lá»‡ (chá»‰ cÃ³ bÃ¬a)",
        validCoverAndPairs: "âœ… Há»£p lá»‡ (bÃ¬a + cÃ¡c cáº·p trang)",
        invalidMissingPage: "âŒ KhÃ´ng há»£p lá»‡ (thiáº¿u 1 trang Ä‘á»ƒ táº¡o cáº·p)",
        bookPageInfo: "ThÃ´ng tin trang sÃ¡ch:",
        totalPages: "Tá»•ng sá»‘ trang",
        status: "Tráº¡ng thÃ¡i",
        structure: "Cáº¥u trÃºc",
        coverOnly: "Chá»‰ cÃ³ bÃ¬a",
        coverAndPairs: "BÃ¬a (1) + {pairs} cáº·p trang{extra}",
        plusOneExtra: " + 1 trang láº»",
        pageTitleCover: "Trang {num} (BÃ¬a)",
        pageTitle: "Trang {num}",
        imageLabel: "HÃ¬nh áº£nh:",
        coverPlaceholder: "BÃ¬a SÃ¡ch",
        pagePlaceholder: "Trang {num}",
        noImageAlt: "ChÆ°a cÃ³ áº£nh - {placeholder}",
        contentLabel: "Ná»™i dung:",
        contentPlaceholder: "Nháº­p ná»™i dung cho trang {num}",
        addNewPage: "â• ThÃªm Trang Má»›i",
        emptyPage: "Trang trá»‘ng",
        endOfBook: "Háº¿t sÃ¡ch",
        loading: "Äang táº£i...",
        waitingIsHappiness: "Chá» Ä‘á»£i lÃ  háº¡nh phÃºc!",
        invalidPageStructure: "Cáº¥u trÃºc trang khÃ´ng há»£p lá»‡!",
        currentPages: "Hiá»‡n táº¡i cÃ³ {total} trang.",
        bookStructureGuide: "Cáº¥u trÃºc sÃ¡ch cáº§n:\n- Trang 1: BÃ¬a\n- Tá»« trang 2 trá»Ÿ Ä‘i: CÃ¡c cáº·p trang (2-3, 4-5, 6-7...)",
        pleaseAddOrRemovePage: "Vui lÃ²ng thÃªm thÃªm 1 trang hoáº·c xÃ³a bá»›t 1 trang Ä‘á»ƒ táº¡o cáº¥u trÃºc há»£p lá»‡.",
        fullscreenNotSupported: "TrÃ¬nh duyá»‡t cá»§a báº¡n khÃ´ng há»— trá»£ cháº¿ Ä‘á»™ toÃ n mÃ n hÃ¬nh!",
        noteSequence: "lÆ°u Ã½: hÃ£y ngÄƒn cÃ¡ch báº±ng dáº¥u | Ä‘á»ƒ tÃ¡ch tá»«, khÃ´ng nÃªn Ä‘á»ƒ má»™t dÃ²ng quÃ¡ dÃ i",
        noteExpire: "â³ <b>LÆ°u Ã½:</b> Háº¡n sá»­ dá»¥ng chá»‰ cÃ³ <b>30 ngÃ y</b>, váº­y nÃªn Ä‘á»«ng táº¡o trÆ°á»›c quÃ¡ sá»›m nhÃ©!",
        followNote: "ğŸ¥° HÃ£y <a href=\"https://www.tiktok.com/@iamtritoan?is_from_webapp=1&sender_device=pc\" target=\"_blank\" style=\"color:#ff0050;font-weight:bold;text-decoration:underline;\">follow mÃ¬nh</a> Ä‘á»ƒ cáº­p nháº­t nhá»¯ng website má»›i nháº¥t, nhanh nháº¥t nhÃ©!",
        on: "Báº­t",
        off: "Táº¯t",
        sec3: "3 giÃ¢y",
        sec5: "5 giÃ¢y",
        sec10: "10 giÃ¢y",
        noGif: "KhÃ´ng cÃ³",
        notVietnamWarning: 'Náº¿u gáº·p váº¥n Ä‘á» hÃ£y nháº¯n tin qua TikTok<a href="https://www.tiktok.com/@iamtritoan?is_from_webapp=1&sender_device=pc" target="_blank" style="color:#ff0050;font-weight:bold;text-decoration:underline;"> @iamtritoan</a> Ä‘á»ƒ Ä‘Æ°á»£c há»— trá»£.',
        isSave: "LÆ°u QR vÄ©nh viá»…n:",
        saveForever: "vÄ©nh viá»…n",
        saveForeverPrice: "(ThÃªm 20.000Ä‘)",
        thirtyDays: "30 ngÃ y",
        expireText: "Háº¡n sá»­ dá»¥ng lÃ ",
        colorTheme: "Chá»n mÃ u:",
        settingsHint: "áº¥n vÃ o Ä‘Ã¢y Ä‘á»ƒ setting theo Ã½ muá»‘n",
        pinkTheme: "Há»“ng ngá»t ngÃ o",
        blueTheme: "Xanh dÆ°Æ¡ng mÃ¡t máº»",
        purpleTheme: "TÃ­m má»™ng mÆ¡",
        customTheme: "TÃ¹y chá»‰nh mÃ u",
        paymentMethod: "PhÆ°Æ¡ng thá»©c thanh toÃ¡n",
        bankPayment: "NgÃ¢n hÃ ng",
        bankPaymentDesc: "Chá»‰ dÃ nh cho ngÆ°á»i dÃ¹ng Viá»‡t Nam",
        paypalPayment: "VÃ­ PayPal",
        paypalPaymentDesc: "DÃ nh cho ngÆ°á»i dÃ¹ng quá»‘c táº¿",
    },
    en: {
        title: "Special Gift for You ğŸ",
        description: "A special gift is waiting for you to discover! Press to see the special message!",
        login: "Sign in with Google",
        logout: "Logout",
        settings: "Website Settings",
        music: "Music Settings",
        backgroundMusic: "Background Music:",
        countdown: "Countdown Settings",
        countdownTime: "Countdown Time:",
        matrix: "Matrix Rain Effect Settings",
        matrixText: "Matrix main text:",
        matrixColor1: "Matrix color 1:",
        matrixColor2: "Matrix color 2:",
        sequence: "Main Text Settings",
        sequenceText: "Main text content:",
        sequenceColor: "Main text color:",
        gift: "Animated Image Settings",
        giftImage: "Animated Image (optional):",
        enableBook: "Show book:",
        book: "Book Page Settings",
        enableHeart: "Show heart effect:",
        note: "â³ Note: The website is valid for only 7 days, so don't create it too early!",
        follow: "ğŸ¥° Please follow me to get the latest websites as soon as possible!",
        apply: "Apply Settings",
        copyright: 'Website created by tiktoker:<a href="https://www.tiktok.com/@iamtritoan?is_from_webapp=1&sender_device=pc" target="_blank"> @iamtritoan</a>',
        fullscreen: "Fullscreen",
        // ...add more keys as needed...

        pricingTitle: "Service Pricing",
        voucher: "Discount voucher:",
        tip: "ğŸ’¸ Tip for author:",
        total: "Total:",
        createWebsite: "ğŸ‰ Create Website",
        payAndCreate: "ğŸ’³ Pay & Create Website",
        defaultConfig: "ğŸ‰ Using default configuration - FREE!",
        customMusic: "Custom background music",
        book: "Memory book",
        extraPage: "Extra page",
        heartEffect: "Heart effect (in book)",
        tipAuthor: "Tip for author",
        voucherApplied: "âœ… Voucher applied: {code} (-{discount}%)",
        loadingVoucher: "Loading vouchers...",
        noVoucher: "You have no vouchers!",
        needLoginVoucher: "You need to login to see vouchers!",
        cannotLoadVoucher: "Cannot load vouchers!",
        copyLink: "ğŸ“‹ Copy Link",
        viewWebsite: "ğŸ”— View Website",
        close: "âœ– Close",
        createSuccess: "ğŸ‰ Website created successfully!",
        price: "Price:",
        shareLink: "Share link:",
        copySuccess: "Link copied!",
        needLogin: "âŒ Please login to create website!",
        minPay: "âŒ Minimum payment is 10,000 VND!",
        error: "âŒ An error occurred!",
        invalidPage: "âŒ Invalid page structure! Currently {pages} pages. Please add or remove 1 page for valid structure.",
        uploading: "ğŸ“¤ Uploading book images...",
        creating: "ğŸŒ Creating website...",
        creatingProduct: "ğŸ“¦ Creating product...",
        applyingVoucher: "ğŸ« Applying voucher...",
        applyVoucherSuccess: "âœ… Voucher applied successfully!",
        applyVoucherFail: "âš ï¸ Voucher error, continue with original price",
        cannotCreate: "Cannot create website",
        cannotCreateProduct: "Error creating product",
        cannotApplyVoucher: "Voucher apply failed!",
        cannotPay: "Payment error: ",
        paymentRedirect: "ğŸ”„ Redirecting to payment page...",
        free: "FREE",
        thanks: "Thank you so much! If you like this product, please follow my TikTok channel <b>tá»› lÃ  ToÃ¡n</b> to motivate me to make more!",
        tiktokBtn: "ğŸ¥° View TikTok channel",
        heartQr: "â¤ï¸ Create heart QR",
        heartQrCopy: "âœ… Heart QR link copied!",
        copyShare: "ğŸ“‹ Copy link",
        copied: "âœ… Copied!",
        copyToClipboard: "ğŸ“‹ Link copied to clipboard!",
        copyFail: "âŒ Cannot copy link!",

        //
        validCoverOnly: "âœ… Valid (cover only)",
        validCoverAndPairs: "âœ… Valid (cover + page pairs)",
        invalidMissingPage: "âŒ Invalid (missing 1 page to form a pair)",
        bookPageInfo: "Book page info:",
        totalPages: "Total pages",
        status: "Status",
        structure: "Structure",
        coverOnly: "Cover only",
        coverAndPairs: "Cover (1) + {pairs} page pairs{extra}",
        plusOneExtra: " + 1 extra page",
        pageTitleCover: "Page {num} (Cover)",
        pageTitle: "Page {num}",
        imageLabel: "Image:",
        coverPlaceholder: "Book Cover",
        pagePlaceholder: "Page {num}",
        noImageAlt: "No image yet - {placeholder}",
        contentLabel: "Content:",
        contentPlaceholder: "Enter content for page {num}",
        addNewPage: "â• Add New Page",
        emptyPage: "Empty page",
        endOfBook: "End of book",
        loading: "Loading...",
        waitingIsHappiness: "Waiting is happiness!",
        invalidPageStructure: "Invalid page structure!",
        currentPages: "Currently {total} pages.",
        bookStructureGuide: "Book structure required:\n- Page 1: Cover\n- From page 2: Page pairs (2-3, 4-5, 6-7...)",
        pleaseAddOrRemovePage: "Please add or remove 1 page to create a valid structure.",
        fullscreenNotSupported: "Your browser does not support fullscreen mode!",
        // ThÃªm vÃ o cáº£ vi vÃ  en:
        noteSequence: "Note: Please separate words with | and don't make a line too long",
        noteExpire: "â³ <b>Note:</b> The website is only valid for <b>30 days</b>, so don't create it too early!",
        followNote: "ğŸ¥° Please <a href=\"https://www.tiktok.com/@iamtritoan?is_from_webapp=1&sender_device=pc\" target=\"_blank\" style=\"color:#ff0050;font-weight:bold;text-decoration:underline;\">follow me</a> to get the latest websites as soon as possible!",
        on: "On",
        off: "Off",
        sec3: "3 seconds",
        sec5: "5 seconds",
        sec10: "10 seconds",
        noGif: "None",
        notVietnamWarning: 'If you encounter any issues, please message me on TikTok<a href="https://www.tiktok.com/@iamtritoan?is_from_webapp=1&sender_device=pc" target="_blank" style="color:#ff0050;font-weight:bold;text-decoration:underline;"> @iamtritoan</a> for support.',
        isSave: "Save QR forever:",
        saveForever: "forever",
        saveForeverPrice: "(Add 20,000 VND)",
        thirtyDays: "30 days",
        expireText: "Expiration is",
        colorTheme: "Choose color:",
        settingsHint: "click here to customize settings",
        pinkTheme: "Sweet Pink",
        blueTheme: "Cool Blue",
        purpleTheme: "Dreamy Purple",
        customTheme: "Custom Color",

        paymentMethod: "Payment Method",
        bankPayment: "Bank Transfer",
        bankPaymentDesc: "For Vietnam users only",
        paypalPayment: "PayPal Wallet",
        paypalPaymentDesc: "For international users",
    }
};

function setLanguage(lang) {
    document.documentElement.lang = lang;
    // Äá»•i title vÃ  meta
    document.title = translations[lang].title;
    document.querySelector('meta[name="description"]').setAttribute('content', translations[lang].description);

    // Äá»•i cÃ¡c pháº§n tá»­ cÃ³ data-i18n
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            if (
                translations[lang][key].includes('<b>') ||
                translations[lang][key].includes('<a')
            ) {
                el.innerHTML = translations[lang][key];
            } else {
                el.innerText = translations[lang][key];
            }
        }
    });

    // Äá»•i cÃ¡c placeholder
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (translations[lang][key]) {
            el.setAttribute('placeholder', translations[lang][key]);
        }
    });

    // Äá»•i cÃ¡c label, option, v.v. náº¿u cáº§n
    // ...bá»• sung náº¿u cáº§n...
}

// LÆ°u ngÃ´n ngá»¯ vÃ o localStorage
function switchLanguage() {
    const current = localStorage.getItem('lang') || 'vi';
    const next = current === 'vi' ? 'en' : 'vi';
    localStorage.setItem('lang', next);
    setLanguage(next);
    // Cáº­p nháº­t láº¡i UI Ä‘á»™ng (náº¿u cÃ³)
    if (window.pricingCalculator) {
        window.pricingCalculator.updatePricing();
    }
    // Cáº­p nháº­t hiá»ƒn thá»‹ háº¡n sá»­ dá»¥ng khi Ä‘á»•i ngÃ´n ngá»¯
    if (typeof updateExpireDateDisplay === 'function') {
        updateExpireDateDisplay();
    }
}

// Khá»Ÿi táº¡o ngÃ´n ngá»¯ khi load trang
document.addEventListener('DOMContentLoaded', () => {
    const lang = localStorage.getItem('lang') || 'vi';
    setLanguage(lang);
    // Gáº¯n sá»± kiá»‡n cho nÃºt chuyá»ƒn ngÃ´n ngá»¯
    document.getElementById('langSwitchBtn').onclick = switchLanguage;
});

function t(key, vars = {}) {
    const lang = localStorage.getItem('lang') || 'vi';
    let str = (translations[lang] && translations[lang][key]) || key;
    Object.keys(vars).forEach(k => {
        str = str.replace(`{${k}}`, vars[k]);
    });
    return str;
}

